@mixin ink-wash-effect($color, $factor) {
  background: linear-gradient(
    135deg,
    rgba(mix($color, white, 95% * $factor), 0.95) 0%,
    rgba(mix($color, white, 85% * $factor), 0.9) 50%,
    rgba(mix($color, white, 75% * $factor), 0.85) 100%
  );
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    opacity: 0.1;
    mix-blend-mode: overlay;
  }
}

@import '../effects/inkWash.scss';
@import '../fonts/fonts.scss';

// 黄金比例常量
$golden-ratio: 1.618;
$base-unit: 10px;
$content-width: 1200px;
$card-width: $content-width / ($golden-ratio * 2);

.canvas-container {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 0;
  
  &.debug-mode {
    z-index: 2; // 在调试模式下提升画布层级
    
    canvas {
      pointer-events: auto !important; // 确保在调试模式下可以操作画布
    }
  }
  
  canvas {
    width: 100%;
    height: 100%;
    pointer-events: none; // 默认不接收指针事件
  }
}

.container {
  display: flex;
  flex-direction: column;
  height: 100%;
  position: relative;
  z-index: 1;
  pointer-events: auto;
  
  &.debug-mode {
    pointer-events: none;
    
    .toolbar-wrapper {
      pointer-events: auto; // 保持工具栏可操作
    }
  }
}

.color-cards {
  width: 100%;
  height: 100%;
  max-width: $content-width;
  margin: 0 auto;
  padding: calc($base-unit * 2);
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: calc($base-unit * 1.5);
  overflow-y: auto;
  
  @media (max-width: $content-width) {
    padding: $base-unit;
    gap: $base-unit;
  }
}

.color-card {
  position: relative;
  width: 100%;
  padding-bottom: 61.8%; // 高宽比 0.618
  border-radius: calc($base-unit * 0.75);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background-color: var(--card-color, white);
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  }

  .color-info {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: calc($base-unit * 1.5);
    display: flex;
    flex-direction: column;
    
    .zh-name {
      font-family: 'AlimamaDongFangDaKai', serif;
      font-size: calc($base-unit * 2);
      opacity: 0.9;
      font-weight: normal;
      letter-spacing: 0.1em;
      margin: 0;
    }

    .description {
      font-size: calc($base-unit * 0.75);
      opacity: 0.75;
      letter-spacing: 0.02em;
      font-weight: 300;
      margin-top: calc($base-unit * 0.25);
      font-family: 'TsangerYuYang', sans-serif;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }

    .color-code {
      font-family: 'SF Mono', monospace;
      font-size: calc($base-unit * 0.75);
      opacity: 0.6;
      letter-spacing: 0.05em;
      margin-top: calc($base-unit * 0.5);
      
      .hex {
        display: block;
        text-transform: uppercase;
      }
    }
  }
}

.toolbar-wrapper {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 2;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  padding: calc($base-unit * ($golden-ratio / 2));
  pointer-events: auto; // 确保工具栏始终可点击
}
